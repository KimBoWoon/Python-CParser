#include <stdio.h>
#include <stdlib.h>
#include <math.h>
#pragma warning(disable:4996)
int main()
{
	FILE* inFile;
	int i = 0;
	int numtestCase, m, n, a, p, b, q;
	double win[1000] = { 0 };
	double lose[1000] = { 0 };
	double expect[1000] = { 0 };
	double max = 0;
	double min = 1000;
	int max1;
	int min1;
	inFile=fopen("input.txt", "r");
	if(inFile==NULL)
		exit(1);
	fscanf(inFile, "%d", &numtestCase);
	while (numtestCase--)
	{
		fscanf(inFile, "%d %d", &n, &m);
		while (m--)
		{
			fscanf(inFile, "%d %d %d %d", &a, &b, &p, &q);
			win[a] += p;
			lose[a] += q;
			win[b] += q;
			lose[b] += p;
		}
		for (i = 0; i < 1000; i++)
		{
			if ((win[i] * win[i] + lose[i] * lose[i]) != 0)
				expect[i] = win[i] * win[i] / (win[i] * win[i] + lose[i] * lose[i]);
			else
				expect[i]=0;
		}
		for (i = 0; i < 1000; i++)
		{
			if (expect[i] >= max)
				max = expect[i];
			if (expect[i] <= min&& expect[i]!=0)
				min = expect[i];
		}
		max *= 1000;
		min *= 1000;
		printf("%d\n",(int)max);
		printf("%d\n", (int)min);
		max = 0;
		min = 1000;
		for (i = 0; i < 1000; i++)
		{
			win[i] = 0;
			lose[i] = 0;
			expect[i] = 0;
		}
	}
	return 0;
}
