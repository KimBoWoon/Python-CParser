

#pragma warning(disable : 4996) 

#include <stdio.h>
#include <stdlib.h>

int CardGame(int, int);
int Max(int, int);

int data[1001];
int dp[1001][1001];
int s[1001][1001];

void main(void)
{
	FILE *inFile;
	int i, j;
	int numCases, numData;

	inFile = fopen("input.txt", "r"); 	

	if (inFile == NULL) exit(1);
	fscanf(inFile, "%d", &numCases); 	
	for (i = 0; i < numCases; i++)
	{
		fscanf(inFile, "%d", &numData); 
		for (j = 1; j <= numData; j++)
			fscanf(inFile, "%d", &data[j]);

		printf("%d\n", CardGame(1, numData));
	}

	fclose(inFile); 			
}

int CardGame(int l, int r)
{
	int i, j;

	for (i = 1; i < r; i++)	
	{
		dp[i][i] = data[i];
		dp[i][i + 1] = data[i] > data[i + 1] ? data[i] : data[i + 1];
		s[i][i] = data[i];
		s[i][i + 1] = data[i] + data[i + 1];
	}
	dp[r][r] = data[r];	
	s[r][r] = data[r];
	for (i = 1; i <= r; i++)
	{
		for (j = 1; j + i + 1 <= r; j++)
		{
			s[j][i + j + 1] = s[j][i + j] + data[i + j + 1];
			dp[j][i + j + 1] = Max(s[j][i + j + 1] - dp[j][i + j], s[j][i + j + 1] - dp[j + 1][i + j + 1]);
		}
	}
	return dp[l][r];
}

int Max(int a, int b)
{
	return a > b ? a : b;
}