#include<stdio.h>
#include<stdlib.h>

int main()
{
	int numcase;
	int n, m;
	int i;
	int a, b, p, q;
	long long W[1005][2] = { 0, };
	long long goras[1005] = { 0, };
	long long min = 20001;
	long long max = -1;

	FILE * in_file;
	in_file = fopen("input.txt", "r");
	fscanf(in_file, "%d", &numcase);

	while (numcase--)
	{
		fscanf(in_file, "%d %d", &n, &m);
		for (i = 1; i <= 1000; i++)						
		{
			W[i][0] = 0;
			W[i][1] = 0;
			goras[i] = 0;
		}
		while (m--)
		{
			fscanf(in_file, "%d %d %d %d", &a, &b, &p, &q);	
			W[a][0] += p;								
			W[a][1] += q;								
			W[b][0] += q;								
			W[b][1] += p;								

		}

		for (i = 1; i <= n; i++)
		{
			if (((W[i][0] * W[i][0]) + (W[i][1] * W[i][1])) != 0)									 
			{
				goras[i] = (W[i][0] * W[i][0]) * 1000 / ((W[i][0] * W[i][0]) + (W[i][1] * W[i][1])); 
			}
			if (min > goras[i])
				min = goras[i];
			if (max < goras[i])
				max = goras[i];

		}

		printf("%lld\n%lld\n", max, min);
		max = -1;
		min = 20001;

	}
}