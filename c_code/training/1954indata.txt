#include <stdio.h>
#include <stdlib.h>

#define MAX(a, b)	a > b ? a : b
#define MIN(a, b)	a < b ? a : b

int main() {

	FILE* infile;
	int i, numTestCases, n, m;
	int a, b, p, q;
	int j, k;
	int A[1001], B[1001];	

	infile = fopen("input.txt", "r");
	if(infile == NULL)	exit(1);

	fscanf(infile, "%d", &numTestCases);

	for(i=0; i<numTestCases; i++) {

		fscanf(infile, "%d %d", &n, &m);

		for(j=1; j<=m; j++)
			A[j] = B[j] = 0;

		for(j=1; j<=m; j++) {

			fscanf(infile, "%d %d %d %d", &a, &b, &p, &q);
			A[a] += p;
			B[a] += q;
			A[b] += q;
			B[b] += p;
		}

		double max = 0, min = 1000;
		double c;

		for(k=1; k<=n; k++) {

			c = (double)(A[k]*A[k]) / (A[k]*A[k] + B[k]*B[k]);
			max = MAX(max, c);
			min = MIN(min, c);
		}
		printf("%d\n%d\n", (int)(max * 1000), (int)(min * 1000));
	}
	fclose(infile);
}