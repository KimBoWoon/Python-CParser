


#include <stdio.h>
#include <stdlib.h>

void main(){

	FILE *in_file;
	int no_cases;

	in_file = fopen("input.txt", "r");

	fscanf(in_file,"%d", &no_cases);

	while(no_cases--){
		int n,m,a,b,p,q,i;
		int res,max,min;
		int *win, *lose;
		fscanf(in_file,"%d %d", &n, &m);
		win = (int*)calloc(n,sizeof(int));
		lose = (int*)calloc(n,sizeof(int)); 
		for(i=0;i<m;i++){
			fscanf(in_file,"%d %d %d %d", &a, &b, &p, &q);
			win[a-1] += p, win[b-1] += q;
			lose[a-1] += q, lose[b-1] += p;
		}
		max=0,min =1000000;
		for(i=0;i<n;i++){
			res = win[i]*win[i]*1000/(win[i]*win[i] + lose[i]*lose[i]);
			max = max<res ? res:max;
			min = min>res ? res:min;
		}
		printf("%d\n%d\n",max,min);
		free(win);
		free(lose); 
	}
	fclose(in_file);
}
