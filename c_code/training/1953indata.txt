

#include <iostream>
#include <fstream>
#include <vector>
#include <algorithm>
#include <cstdlib>

using namespace std;

int main()
{
	ifstream infile;
	int testCase;
	int n, m;
	int a, b, p, q;
	float S[1001], A[1001];
	float temp;
	vector <float> result;
	infile.open("input.txt");

	infile >> testCase;

	for (int i = 0; i < testCase; i++)
	{

		infile >> n >> m; 
		for (int j = 0; j < 1001; j++)
		{
			S[j] = 0;
			A[j] = 0;
		}


		result.clear();
		for (int j = 0; j < m; j++)
		{
			infile >> a >> b >> p >> q;
			S[a] += p; A[a] += q;
			S[b] += q; A[b] += p;
		}

		for (int j = 1; j <= n; j++)
		{
			temp = ((S[j] * S[j]) / (S[j] * S[j] + A[j] * A[j])) * 1000;
			result.push_back(temp);
		}

		sort(result.begin(), result.end());

		cout << int(result[result.size() - 1]) << endl;
		cout << int(result[0]) << endl;
	}

	infile.close();

	return 0;
}