#include<iostream>
#include<fstream>
#include<cstdlib>


void settingScore(int a, int  b, int  p, int  q, int*  getScore, int*  lostScore);
void printW(int* getScore, int* lostScore, int n);
using namespace std;

int main()
{

	ifstream inStream;
	inStream.open("input.txt");
	if (inStream.fail()) exit(1);

	int numTest;

	inStream >> numTest;


	for (int k = 0; k < numTest; k++)
	{
		int n, m;
		inStream >> n >> m;


		int *getScore = new int[n + 1];
		int *lostScore = new int[n + 1];
		for (int j = 0; j <= n; j++)
		{
			getScore[j] = 0;
			lostScore[j] = 0;
		}

		int a, b, p, q;
		for (int j = 0; j < m; j++){
			inStream >> a >> b >> p >> q;
			settingScore(a, b, p, q, getScore, lostScore);
		}
		printW(getScore, lostScore, n);

	}

}

void settingScore(int a, int  b, int  p, int  q, int*  getScore, int*  lostScore)
{
	getScore[a] = getScore[a] + p;
	getScore[b] = getScore[b] + q;
	lostScore[a] = lostScore[a] + q;
	lostScore[b] = lostScore[b] + p;
}

void printW(int* getScore, int* lostScore, int n)
{
	double w = 0;
	double max = 0;
	double min = 10000;

	for (int k = 1; k <= n; k++)
	{
		w = double(getScore[k] * getScore[k]) / double((getScore[k] * getScore[k] + lostScore[k] * lostScore[k]));
		if (w > max) max = w;
		if (w < min) min = w;
	}

	cout << int(max * 1000) <<endl<< int(min * 1000) << endl;

}
