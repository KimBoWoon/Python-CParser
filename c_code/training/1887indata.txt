#include <iostream>
#include <fstream>
#include <vector>
#include <algorithm>
#include <cstdlib>

using namespace std;

int main() {

	ifstream inStream;
	inStream.open("input.txt");

	int case_num;
	inStream >> case_num;

	for (int case_cnt = 0; case_cnt < case_num; ++case_cnt) {
		int d[1010][2] = { { 0, }, };
		int n, m;
		inStream >> n >> m;
		for (int i = 0; i < m; ++i) {
			int a, b, p, q;
			inStream >> a >> b >> p >> q;
			d[a][0] += p;
			d[b][1] += p;
			d[a][1] += q;
			d[b][0] += q;
		}

		int mi = 100000000;
		int ma = 0;
		for (int i = 1; i <= n; ++i) {
			int s;
			if (d[i][0] == 0 && d[i][1] == 0)
				s = 0;
			else
				s = ((d[i][0] * d[i][0]) / (double)((d[i][0] * d[i][0]) + (d[i][1] * d[i][1]))) * 1000;

			if (s < mi)
				mi = s;
			if (ma < s)
				ma = s;
		}

		cout << ma << endl;
		cout << mi << endl;
	}
	return 0;
}