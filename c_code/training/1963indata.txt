#include <iostream>
#include <cstdlib>
#include <fstream>

using namespace std;
 
int T, N, M;
int A[1004], B[1004];
 
int main()
{

	fstream in_file;

	in_file.open("input.txt");

	if(in_file.fail())
	{
		cerr << "input file error" << endl;
		exit(1);
	}

    for (in_file >> T;T--;){
        in_file >> N;
		in_file >> M;
        for (int i=1;i<=N;i++) A[i] = B[i] = 0;
        for (int i=1;i<=M;i++){
            int a, b, p, q;
			in_file >> a; in_file >> b; in_file >> p; in_file >> q;
            A[a] += p; B[a] += q;
            A[b] += q; B[b] += p;
        }
        double mx = 0, mn = 2e9;
        for (int i=1;i<=N;i++){
            double v = A[i] + B[i] ? ((double)(A[i]*A[i]) / (A[i]*A[i] + B[i]*B[i])) : 0;
            mx = max(mx, v);
            mn = min(mn, v);
        }
        printf("%d\n%d\n", (int)(mx * 1000 + 1e-8), (int)(mn * 1000 + 1e-8));
    }
}