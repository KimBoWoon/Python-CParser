#include <cstdio>
#include <cstring>

struct Score {
	int win;
	int lose;
	long long W;
};

Score teams[1001];
int main(void) {
	freopen("input.txt", "r", stdin);

	int t;
	scanf("%d", &t);
	while (t--) {
		memset(teams, 0, sizeof(teams));
		int n, m;
		scanf("%d %d", &n, &m);

		for (int i = 0; i < m; i++) {
			int team1, team2, score1, score2;
			scanf("%d %d %d %d", &team1, &team2, &score1, &score2);

			teams[team1].win += score1;
			teams[team1].lose += score2;
			teams[team2].win += score2;
			teams[team2].lose += score1;
		}

		int max = 1, min = 1;
		for (int i = 1; i <= n; i++) {
			if (teams[i].win == 0 && teams[i].lose == 0) teams[i].W = 0;
			else {
				long long winpow = teams[i].win * teams[i].win;
				long long losepow = teams[i].lose * teams[i].lose;

				teams[i].W = winpow * 1000LL / (winpow + losepow);
			}
			if (teams[i].W > teams[max].W) max = i;
			if (teams[i].W < teams[min].W) min = i;
		}

		printf("%lld\n%lld\n", teams[max].W, teams[min].W);
	}
	return 0;
}