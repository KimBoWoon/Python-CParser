#include <iostream>
#include <cstdlib>
#include <fstream>
#include <memory.h>
using namespace std;

struct Expect
{
	int score;  
	int loseScore; 
};
Expect arr[1001];
int main()
{
	ifstream in;
	in.open("input.txt");
	int t;
	in>>t;
	while(t--)
	{
		memset(arr,0,sizeof(arr));
		int n,K;
		in>>n>>K;

		int n1,n2,p,q;
		for(int i=0;i<K;i++)
		{
			in>>n1>>n2>>p>>q;

			arr[n1].score+=p;
			arr[n1].loseScore+=q;

			arr[n2].score+=q;
			arr[n2].loseScore+=p;
		}

		double min=0,max=0;
		for(int i=1;i<=n;i++)
		{
			double S = arr[i].score;
			double A = arr[i].loseScore;
			double W ;
			if(S==0 && A==0) W=0;
			else W = (S*S) / (S*S + A*A);

			if(i==1) 
			{
				min = W;
				max = W;
			}
			else 
			{
				min = min > W ? W : min;
				max = max < W ? W: max;
			}
		}
		cout<<(int)(max*1000)<<endl;
		cout<<(int)(min*1000)<<endl;
	}
	return 0;
}