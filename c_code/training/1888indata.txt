#include <cstdio>
#include <cfloat>
using namespace std;

#define MAX 1005

int T, M, N, S[MAX], A[MAX];
double W, MaxOfP, MinOfP;
int t1, t2, s1, s2;

int main() {
    FILE* inFile;
    inFile = fopen("input.txt", "r");

    for(fscanf(inFile, "%d", &T); T--;)
    {
        fscanf(inFile, "%d%d", &N, &M);

        MaxOfP = DBL_MIN;
        MinOfP = DBL_MAX;

        for (int i=1; i<=N; ++i)
        {
            S[i]=0;
            A[i]=0;
        }

        for (int i=0; i<M; ++i)
        {
            fscanf(inFile, "%d%d%d%d", &t1, &t2, &s1, &s2);
            S[t1] += s1; A[t1] += s2;
            S[t2] += s2; A[t2] += s1;
        }

        for (int i=1; i<=N; ++i)
        {
            W=0;
            if (S[i] != 0 || A[i] != 0)
                W = (S[i] * S[i] * 1.0) / (S[i] * S[i] + A[i] * A[i]);

            if (W > MaxOfP)
                MaxOfP = W;
            if (W < MinOfP)
                MinOfP = W;
        }

        printf("%d\n%d\n", (int)(MaxOfP*1000), (int)(MinOfP*1000));
    }

    fclose(inFile);
    return 0;
}