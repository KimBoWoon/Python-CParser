

#include <iostream>
#include <fstream>
using namespace std;

int main()
{
	ifstream inFile("input.txt");
	int no_cases = 0;
	inFile >> no_cases;
	for (int test = 0; test < no_cases; test++){
		int n, m;
		inFile >> n >> m;
		int a, b, p, q;
		int arr[2][1000] = { 0, };
		for (int i = 0; i < m; i++)
		{
			inFile >> a >> b >> p >> q;
			arr[0][a] += p;
			arr[1][a] += q;

			arr[0][b] += q;
			arr[1][b] += p;
		}
		double brr[1000] = { 0, };
		for (int i = 1; i <= n; i++)
		{
			if (arr[0] != 0 && arr[1] != 0)
			{
				brr[i] = (arr[0][i] * arr[0][i]) / (double)((arr[0][i] * arr[0][i]) + (arr[1][i] * arr[1][i]));
			}
		}
		double max = brr[1],min=brr[1];
		for (int i = 1; i <= n; i++)
		{
			if (max < brr[i])
				max = brr[i];
			if (min>brr[i])
				min = brr[i];
		}
		cout << (int)(max * 1000) << endl;
		cout << (int)(min * 1000) << endl;
	}
	return 0;
}
