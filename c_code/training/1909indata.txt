#include <cstdio>
#include <iostream>

using namespace std;


class Team
{
    int total_obtain_score;
    int total_lost_score;
public:
    Team(){ total_lost_score=total_obtain_score=0;}
    void obtain_score(int score){total_obtain_score+=score; }
    void lost_score(int score){total_lost_score+=score; }
    int getW(){ int s=total_obtain_score; int a=total_lost_score; return ( (double)(s*s)/(double)(s*s+a*a) )*1000;}
};


int main(int argc, char** argv) {


	freopen("input.txt", "r", stdin);

	setbuf(stdout, NULL);

	int T;
	int test_case;
    
	scanf("%d", &T);	
	
	for(test_case = 1; test_case <= T; ++test_case) {
		
    	int teamNum,matches;

    	scanf("%d %d", &teamNum,&matches);

       Team *teams= new Team[teamNum];

       for(int i=0; i<matches; i++)
       {

        int team1,team2;
        int score1,score2;

        scanf("%d %d %d %d", &team1,&team2,&score1,&score2);

        teams[team1-1].obtain_score(score1);
        teams[team1-1].lost_score(score2);
        
        teams[team2-1].obtain_score(score2);
        teams[team2-1].lost_score(score1);

       }

       int max=0; int min=1000;

        for(int i=0; i<teamNum; i++)
       {
            int w=teams[i].getW();
            if(w>max)
                max=w;

            if(w<min)
                min=w;
       }

       printf("%d\n%d\n",max,min);
        
       delete teams;

	}

	return 0;	
}

