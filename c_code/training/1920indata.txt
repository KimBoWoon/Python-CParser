#include <iostream>
#include <fstream>
using namespace std;


int main() {
    fstream in;
    in.open("input.txt");
    int numcases;
    in>>numcases;
    for(int i=0; i<numcases; i++)
    {
		int win[1000]={0,};
		double goal[1000]={0,};
		double loss[1000]={0.1};
        int numOfTeam, numOfGames;
        in>>numOfTeam>>numOfGames;
        for(int j=0; j<numOfGames; j++)
        {
            int a,b;
            double p,q;
            in>>a>>b>>p>>q;
            goal[a]+=p;
            loss[a]+=q;
            goal[b]+=q;
            loss[b]+=p;
            if(p>q)
            {
                win[a]++;
            }
            else{
                win[b]++;
            }
        }
        double max=0.0;
        double min=1.0;
        for(int j=1; j<=numOfTeam; j++){
            double w;
            w=(double)(goal[j]*goal[j])/((goal[j]*goal[j])+(loss[j]*loss[j]));
            if(max<=w)
            {
                max=w;
            }
            if(min>=w)
            {
                min=w;
            }
        }
        cout<<int(max*1000)<<endl;
		cout<<int(min*1000)<<endl;
        
    }
    
}