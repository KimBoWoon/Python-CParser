#include <iostream>
#include <fstream>

void game(std::ifstream& inFile, int teams, int count);

int main(){

	int testCases = 0;
	std::ifstream inFile("input.txt");
	inFile >> testCases;

	for (int i = 0; i < testCases; i++){
		int teams, count;
		inFile >> teams >> count;

		game(inFile, teams, count);
	}

	return 0;
}

void game(std::ifstream& inFile, int teams, int count){
	int teams_add[1000] = { 0 };
	int teams_sub[1000] = { 0 };

	int team1 = 0;
	int team2 = 0;
	int score1 = 0;
	int score2 = 0;
	for (int i = 0; i < count; i++) {
		inFile >> team1 >> team2 >> score1 >> score2;
		teams_add[team1] += score1;
		teams_sub[team2] += score1;

		teams_add[team2] += score2;
		teams_sub[team1] += score2;
	}
	float max = -1;
	float min = 999999999;
	float cul = 0;
	for (int i = 1; i <= teams; i++) {

		if ((teams_add[i] * teams_add[i] + teams_sub[i] * teams_sub[i]) == 0) {
			cul = 0;
		}
		else {
			cul = (teams_add[i] * teams_add[i] * 1000) / ((teams_add[i] * teams_add[i]) + (teams_sub[i] * teams_sub[i]));
		}
		if (cul > max) {
			max = cul;
		}
		if (cul < min) {
			min = cul;
		}
	}
	std::cout << max << std::endl;
	std::cout << min << std::endl;

}