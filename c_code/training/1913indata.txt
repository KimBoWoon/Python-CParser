

#include <iostream>
#include <fstream>


int main()
{
	std::ifstream infile("input.txt");

	int numTests;


	

	infile >> numTests;

	for(int i=0; i< numTests; i++)
	{
		int max = 0;

		int min = 2000;


		double A[1001] = {0};
		double S[1001] = {0};

		double  s,a;	
		int b, c;
		int tn,gn;

		infile>>tn >> gn;

		for (int j=0; j< gn; j++)
		{ 

			infile >> b >> c >> s >>a;
			
			S[b] += s;
			A[b] += a;
			S[c] += a;
			A[c] += s;
		}


		for( int j=0; j< tn; j++)
		{
			double ss ;
			double aa;
			int temp;
			if( S[j+1] == 0 )
			{
				continue;
			}



			ss = S[j+1] * S[j+1];
			aa = A[j+1] * A[j+1];
			

			temp =(int)( ss/(ss+aa) * 1000);


			if(  temp > max )
				max = temp;
			else if ( temp < min)
				min = temp;
		}

		std::cout<< max << std::endl;	
		std::cout<< min << std::endl;	
	}
}
