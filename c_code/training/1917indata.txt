#include <stdio.h>
#include <stdlib.h>
#pragma warning(disable:4996);

double play(int s, int a);
int compare(void *first, void *second);

void main() {
	FILE *f;
	int numTestCases;
	int teams, games;
	int i, j;
	int a, b, p, q;
	int *arr;
	double *w;

	f = fopen("input.txt", "r");
	fscanf(f, "%d", &numTestCases);
	for (i = 0; i < numTestCases; i++) {
		fscanf(f, "%d %d", &teams, &games);
		arr = (int *)malloc(sizeof(int)*(teams + 1) * 2);
		w = (double *)malloc(sizeof(double)*(teams + 1));
		for (j = 0; j <= teams; j++) {
			*(arr + j * 2) = 0;
			*(arr + j * 2 + 1) = 0;
		}
		for (j = 0; j < games; j++) {
			fscanf(f, "%d %d %d %d", &a, &b, &p, &q);
			*(arr + a * 2) += p;
			*(arr + a * 2 + 1) += q;
			*(arr + b * 2) += q;
			*(arr + b * 2 + 1) += p;
		}
		for (j = 0; j < teams; j++)
			*(w + j) = play(*(arr + (j + 1) * 2), *(arr + (j + 1) * 2 + 1));
		qsort(w, teams, sizeof(double), compare);
		a = *(w)* 1000;
		b = *(w + teams - 1) * 1000;
		printf("%d\n", b);
		printf("%d\n", a);
		free(arr);
		free(w);
	}


}

double play(int s, int a) {
	double result = (s*s);
	result /= (s*s + a*a);
	return result;
}

int compare(void *first, void *second)
{
	if (*(double*)first > *(double*)second)
		return 1;
	else if (*(int*)first < *(int*)second)
		return -1;
	else
		return 0;
}