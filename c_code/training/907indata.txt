#include <iostream>
#include <fstream>
#include <cstdlib>
#include <vector>
#include <algorithm>
#include <cstring>

using namespace std;
vector<int> Input;
const int MAX_N = 1001;
int arr[MAX_N][MAX_N];
int cardGame(int left, int right);
int main() {
	ifstream instream;
	int numTestCases;
	instream.open("input.txt");
	instream >> numTestCases;
	while(numTestCases--) {
		int cnt;
		instream >> cnt;
		Input.clear();
		memset(arr, -1, sizeof(arr));
		for(int i=0; i<cnt; i++) {
			int num;
			instream >> num;
			Input.push_back(num);
		}
		cout << cardGame(0, (int)Input.size()-1) << endl;
	}
	instream.close();
}
int cardGame(int left, int right) {
	if (left > right)
		return 0;
	int& result = arr[left][right];
	if (result != -1) 
		return result;
	int case1 = cardGame(left+2, right) + Input[left];
	int case2 = cardGame(left+1, right-1) + Input[left];
	int case3 = cardGame(left+1, right-1) + Input[right];
	int case4 = cardGame(left, right-2) + Input[right];
	int caseL = min(case1, case2);
	int caseR = min(case3, case4);
	return result = max(caseL, caseR);
}