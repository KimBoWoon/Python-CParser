
#include <iostream>
#include <cstdlib>
#include <fstream>
#include <math.h>

using namespace std;

void Pyteagorean(double score1[], double score2[], int num){
	double w[1000]={0,};
	int i;
	double max=0, min=9999999;
	for(i=1; i<=num; i++){
		w[i]=(score1[i]*score1[i])/( (score1[i]*score1[i])+(score2[i]*score2[i]) );		
		if(w[i]>max)
			max=w[i];
		if(w[i]<min)
			min=w[i];
	}
	max*=1000;
	min*=1000;
	printf("%g\n", floor(max));
	printf("%g\n", floor(min));
}

int main(){
	ifstream infile;
	int i, testCase;
	infile.open("input.txt");
	infile>>testCase;
	
	for(i=0; i<testCase; i++){
		int numOfTeam, setNum, j;
		int team1, team2, num1, num2;
		double score1[1000]={0,}, score2[1000]={0,};
		infile>>numOfTeam>>setNum;

		for(j=0; j<setNum; j++){
			infile>>team1>>team2>>num1>>num2;
			score1[team1]+=num1;						
			score1[team2]+=num2;
			score2[team1]+=num2;						
			score2[team2]+=num1;
		}
		Pyteagorean(score1, score2, numOfTeam);

	}
}