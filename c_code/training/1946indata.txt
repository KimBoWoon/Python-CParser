

#include <stdio.h>
#include <stdlib.h>

void main()
{
	FILE *file;
	int i, j;
	int test;
	int n,m;
	int a,b,p,q;
	int **arr;
	int max=0, min=0, W=0, S=0, A=0;
	

	file = fopen("input.txt", "r");
	if(file==NULL) exit(1);

	fscanf(file, "%d", &test);
	for (i = 0; i < test; i++)
	{
		fscanf(file, "%d %d", &n, &m);
		arr=(int**)malloc(sizeof(int*)*(n+1));
		for(j=0; j<(n+1); j++)
		{
			*(arr+j)=(int*)malloc(sizeof(int)*2);
		}
		for(j=0; j<(n+1); j++)
		{
			arr[j][0]=0;
			arr[j][1]=0;
		}

		for(j=0; j<m; j++)
		{
			fscanf(file, "%d %d %d %d", &a, &b, &p, &q);
			arr[a][0]+=p;
			arr[a][1]+=q;
			arr[b][0]+=q;
			arr[b][1]+=p;
		}
		
		for(j=1; j<n+1; j++)
		{
			S=(arr[j][0])*(arr[j][0]);
			A=(arr[j][1])*(arr[j][1]);
			W=((double)S/(double)(S+A))*1000;
	
			if(W>max)
				max = W;
			if(j==1)
				min = W;
			else if(W<min)
				min = W;
		}
		printf("%d\n%d\n",max, min);
		max=0, min=0;
	}
	fclose(file);
}