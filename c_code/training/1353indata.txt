


#include <iostream>
#include <fstream>
#include <cstdlib>

using namespace std;


int gcd(int a, int b);
int comp(int a, int b, int cur);
void henry(int* a, int* b, int cur);


int main()
{
	ifstream instream;
	instream.open("input.txt");
	if (instream.fail())
	{
		cerr << "Error";
		exit(1);
	}

	int no_cases;
	instream >> no_cases;

	for (int i = 0; i < no_cases; i++)
	{
		
		int num1, x;
		int cur = 2; 
		instream >> num1 >> x;

		while (num1 != 1) 
		{ 
			while (comp(num1, x, cur))
			{
				cur++;
			}

			henry(&num1, &x, cur);

			if (x % num1 == 0) 
			{
				x /= num1;
				num1 = 1;
			}
		}
		cout << x << endl;

	}

	return 0;
}


int gcd(int a, int b)
{
	if (a == b)
		return a;
	else if (a > b)
		gcd(a - b, b);
	else
		gcd(a, b - a);
}



int comp(int a, int b, int cur) 
{
	return a*cur < b;
}


void henry(int* a, int* b, int cur)
{
	int g = gcd(*b, cur);
	int gB = *b / g, gC = cur / g;

	*a = *a * gC - gB;
	*b = *b * gC;
}



