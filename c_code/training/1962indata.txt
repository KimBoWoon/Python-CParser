
#include <iostream>
#include <fstream>
#include <cstdlib>

using namespace std;

void cal(fstream &infile);
void cal2(double teams[], double teamf[],int t, int tm);

int main()
{
   int numcases;

   fstream infile;
   infile.open("input.txt");

   if (infile.fail())
   {
      cerr << "¿À·ù" << endl;
      exit(1);
   }

   infile >> numcases;

   for (int i = 0; i < numcases; i++)
   {
      cal(infile);
   }
}

void cal(fstream &infile)
{
   double ts[1000];
   double tf[1000];
   int score[1000][4];
   double calnum[1000];
   double calnum2[1000];
   int t;
   int m;
   int i, j;

   infile >> t;
   infile >> m;

   for (i = 0; i < m; i++)
   {
      for (j = 0; j < 4; j++)
      {
         infile >> score[i][j];
      }
   }

   for (i = 0; i < 1000; i++)
   {
      ts[i] = 0;
      tf[i] = 0;
   }

   for (i = 0; i < m; i++)
   {
      ts[score[i][0]] += score[i][2];
      tf[score[i][0]] += score[i][3];

      ts[score[i][1]] += score[i][3];
      tf[score[i][1]] += score[i][2];
   }

   cal2(ts, tf, t, m);
}

void cal2(double teams[], double teamf[],int t, int tm)
{
   double calnum[1000];
   double calnum2[1000];
   long max;
   long min;

   for (int i = 1; i <= t; i++)
   {
      calnum2[i] = ((teams[i] * teams[i]) / ((teams[i] * teams[i]) + (teamf[i] * teamf[i]))) * 1000;
   }

   max = calnum2[1];
   min = calnum2[1];

   for (int i = 2; i <= t; i++)
   {
      if (max < calnum2[i])
      {
         max = calnum2[i];
      }
	  if (min > calnum2[i])
      {
         min = calnum2[i];
      }
   }

   cout << max << endl;
   cout << min << endl;
}