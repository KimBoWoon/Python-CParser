#include<iostream>
#include<fstream>

using namespace std;
void check(int **team, int* w,int teamcount){
	int checkcount;
	int	wincount,losecount;
	for (int i = 1; i <= teamcount; i++){
		wincount = losecount = 0;
		for (int j = 1; j <= teamcount; j++){
			if (i == j) continue;
			wincount += team[i][j];
			losecount += team[j][i];
		}
		if (wincount == losecount)
			w[i] = 0;
		else
			w[i] = (wincount*wincount*1000) / ((wincount*wincount) + (losecount*losecount));
	}
}
void del(int**arr, int *w,int teamcount){
	for (int i = 0; i <= teamcount; i++){
		delete arr[i];
	}
	delete arr;
	delete w;
}
int main(){
	ifstream in;
	in.open("input.txt");
	int n,teamcount,gamecount,a,b,p,q;
	in >> n;
	for (int i = 0; i < n; i++){
		int **team;
		int* w;
		in >> teamcount >> gamecount;
		team = new int*[teamcount+1];
		w = new int[teamcount + 1];
		for (int j = 0; j <= teamcount; j++){
			*(team + j) = new int[teamcount + 1];
			for (int k = 0; k <= teamcount; k++){
				team[j][k] = 0;
			}
			w[j] = 0;
		}
		for (int j = 0; j < gamecount; j++){
			in >> a >> b >> p >> q;
			team[a][b] += p;
			team[b][a] += q;
		}
		check(team, w, teamcount);
		for (int j = 1; j <= teamcount; j++){
			for (int k = j; k <= teamcount; k++){
				if (w[j] < w[k]){
					int temp = w[j];
					w[j] = w[k];
					w[k] = temp;
				}
			}
		}
		cout << w[1] << endl;
		for (int j = 1; j <= teamcount; j++){
			if (w[j + 1] == 0 || j == teamcount){
				cout << w[j] << endl;
				break;
			}
		}
		del(team, w, teamcount);
	}
	return 0;
}