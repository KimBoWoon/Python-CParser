#include <iostream>
#include <fstream>
#include <vector>
using namespace std;

int expectation(int _s, int _a) {
	double s = (double)_s;
	double a = (double)_a;

	return (s * s) / (s * s + a * a) * 1000;
}

int main() {
	ifstream file;
	file.open("input.txt");
	int cases;
	file >> cases;
	while (cases--) {
		int team_size, numOfPlay;
		file >> team_size >> numOfPlay;
		vector<int> win, lose;

		for (int i = 0; i < team_size; i++) {
			win.push_back(0);	lose.push_back(0);
		}

		for (int i = 0; i < numOfPlay; i++) {
			int a, b, p, q;
			file >> a >> b >> p >> q;

			win[a - 1] += p;
			lose[a - 1] += q;

			win[b - 1] += q;
			lose[b - 1] += p;
		}

		int max = -999999, min = 99999;
		for (int i = 0; i < team_size; i++) {
			int temp = expectation(win[i], lose[i]);
			if (temp < min)	min = temp;
			if (temp > max)	max = temp;
		}

		cout << max << endl;
		cout << min << endl;
	}


	return 1;
}