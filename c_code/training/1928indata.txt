
#include <stdio.h>

#define MAX 1001
#define EXP(a,b) 1000*(a)*(a)/((a)*(a)+(b)*(b))

void expectation(FILE *fin) {
    int n, m, a, b, p, q, w;
    int i;
    int max = -1, min = 20002;
    
    int S[MAX] = {0};       
    int A[MAX] = {0};       
    
    fscanf(fin, "%d %d", &n, &m);
    for(i=0; i<m; i++) {
        fscanf(fin, "%d %d %d %d", &a, &b, &p, &q);
        S[a] += p;  A[a] += q;
        S[b] += q;  A[b] += p;
    }
    for(i=1; i<=n; i++) {
        if((w = EXP(S[i],A[i])) == 0)
            w = 0;
        if(w < min)
            min = w;
        if(w > max)
            max = w;
    }
    
    printf("%d\n%d\n", max, min);
}

int main(){
    int testCases, cases;
    FILE* fin = fopen("input.txt", "r");    
    
    fscanf(fin, "%d", &testCases);      
    
    for(cases=0; cases<testCases; cases++)
        expectation(fin);       
    
    fclose(fin);            
    
    return 0;           
}
