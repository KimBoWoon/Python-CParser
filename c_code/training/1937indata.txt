
#include <iostream>
#include <fstream>

int t[1001][2];

int main() {

	int m, n, a, b, p, q;
	int numcase;
	int i;
	std::ifstream fin;
	fin.open("input.txt");

	fin >> numcase;

	while (numcase--) {
		fin >> n >> m;
		int min = -1, max = 0;
		for (i = 0; i < m; i++) {
			fin >> a >> b >> p >> q;
			t[a][0] += p;
			t[a][1] += q;
			t[b][0] += q;
			t[b][1] += p;
		}

		for (i = 1; i <= n; i++) {
			double W;
			int S = t[i][0], A = t[i][1];
			
			if (S == 0 && A == 0) W = 0;
			else W = 1000 * (S*S) / ((S*S) + (A*A));
			
			if (max < W) max = W;
			if (min > W || min == -1) min = W;
		}
		std::cout << max << std::endl;
		std::cout << min << std::endl;
		
		for (i = 1; i <= n; i++) {	
			t[i][0] = 0;
			t[i][1] = 0;
		}
	}
	
	return -1;
}